From cd23c7b6df22fe854285fb134fd25d4c5c091151 Mon Sep 17 00:00:00 2001
From: Sam James <sam@gentoo.org>
Date: Fri, 4 Nov 2022 02:32:49 +0000
Subject: [PATCH 10/12] gh-99086: Build: Fix -Wimplicit-int in
 PTHREAD_SCOPE_SYSTEM check (#99085)

Clang 16 makes -Wimplicit-int fatal by default.

Avoids errors like:
```
conftest.c:142:7: error: type specifier missing, defaults to 'int'; ISO C99 and later do not support implicit int [-Wimplicit-int]
```

Signed-off-by: Sam James <sam@gentoo.org>
---
 .../next/Build/2022-11-04-02-58-10.gh-issue-99086.DV_4Br.rst    | 1 +
 configure                                                       | 2 +-
 configure.ac                                                    | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)
 create mode 100644 Misc/NEWS.d/next/Build/2022-11-04-02-58-10.gh-issue-99086.DV_4Br.rst

diff --git a/Misc/NEWS.d/next/Build/2022-11-04-02-58-10.gh-issue-99086.DV_4Br.rst b/Misc/NEWS.d/next/Build/2022-11-04-02-58-10.gh-issue-99086.DV_4Br.rst
new file mode 100644
index 0000000000..e320ecfdfb
--- /dev/null
+++ b/Misc/NEWS.d/next/Build/2022-11-04-02-58-10.gh-issue-99086.DV_4Br.rst
@@ -0,0 +1 @@
+Fix ``-Wimplicit-int`` compiler warning in :program:`configure` check for ``PTHREAD_SCOPE_SYSTEM``.
diff --git a/configure b/configure
index 784f8d3060..ab7bb6f3e6 100755
--- a/configure
+++ b/configure
@@ -14263,7 +14263,7 @@ else
       void *foo(void *parm) {
         return NULL;
       }
-      main() {
+      int main() {
         pthread_attr_t attr;
         pthread_t id;
         if (pthread_attr_init(&attr)) return (-1);
diff --git a/configure.ac b/configure.ac
index 4bc965239a..128ae7b7ce 100644
--- a/configure.ac
+++ b/configure.ac
@@ -4136,7 +4136,7 @@ if test "$posix_threads" = "yes"; then
       void *foo(void *parm) {
         return NULL;
       }
-      main() {
+      int main() {
         pthread_attr_t attr;
         pthread_t id;
         if (pthread_attr_init(&attr)) return (-1);
-- 
2.38.1

